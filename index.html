<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Á∏Ñ„Åô„Åì JJRU Ver.4.2.0</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
* { box-sizing: border-box; }
body { 
  background: linear-gradient(135deg,#0a0a1a,#11112a); 
  color: #eee; 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
  margin: 0; 
  padding: 0;
  font-size: 16px;
  line-height: 1.5;
}
h2 { 
  margin: 60px 0 12px; 
  font-size: 1.4em; 
  color: #00d4ff; 
  text-shadow: 0 0 5px #00d4ff;
  text-align: center;
}
h3 { 
  margin: 16px 0 12px; 
  font-size: 1.2em; 
  color: #fff; 
  text-shadow: 0 0 2px #00d4ff;
  text-align: center;
}

.container { 
  max-width: 100%; 
  margin: 0 auto; 
  padding: 12px; 
}
.section { display: none; }
.section.active { display: block; }

/* Language Switcher */
.lang-switcher { 
  position: absolute; 
  top: 8px; 
  right: 8px; 
  z-index: 1000; 
}
.lang-dropdown { 
  position: relative; 
  display: inline-block; 
}
.lang-current { 
  background: #00d4ff; 
  border: none; 
  border-radius: 6px; 
  padding: 6px 10px; 
  color: #11112a; 
  cursor: pointer; 
  font-size: 13px; 
  font-weight: bold;
  min-height: 36px;
  display: flex;
  align-items: center;
  gap: 3px;
}
.lang-menu { 
  display: none; 
  position: absolute; 
  right: 0; 
  top: 40px; 
  background: #11112a; 
  border: 1px solid #00d4ff; 
  border-radius: 8px; 
  min-width: 130px; 
  box-shadow: 0 4px 12px rgba(0,212,255,0.4); 
}
.lang-menu.show { display: block; }
.lang-option { 
  padding: 10px 14px; 
  color: #00d4ff; 
  cursor: pointer; 
  font-size: 14px; 
  border-bottom: 1px solid rgba(0,212,255,0.2);
  min-height: 40px;
  display: flex;
  align-items: center;
}
.lang-option:last-child { border-bottom: none; }
.lang-option:hover, .lang-option:active { 
  background: #00d4ff; 
  color: #11112a; 
}

/* ÂÖ±ÈÄö„Éú„Çø„É≥ */
button { 
  background: linear-gradient(to bottom,#222 0%,#444 100%); 
  border: none; 
  border-radius: 10px; 
  color: white; 
  margin: 6px 4px; 
  transition: all 0.2s; 
  cursor: pointer;
  font-size: 16px;
  min-height: 44px;
  padding: 12px 16px;
  touch-action: manipulation;
}
button:active { 
  transform: scale(0.96); 
  background: #555; 
}

/* Difficulty Grid */
.level-grid { 
  display: grid; 
  grid-template-columns: repeat(3, 1fr); 
  gap: 8px; 
  margin: 16px 0; 
  padding: 0 4px;
}
.level-grid button { 
  width: 100%;
  height: 80px;
  font-size: 18px;
  font-weight: bold;
  margin: 0;
  background: #11112a; 
  border: 2px solid #00d4ff; 
  color: #00d4ff;
}
.level-grid button:active {
  background: #00d4ff;
  color: #11112a;
}

/* Value Display */
.value-display { 
  font-size: 22px; 
  margin: 16px 0; 
  color: #00d4ff;
  font-weight: bold;
  text-align: center;
}

/* Presentation */
.pres-row { 
  display: flex; 
  justify-content: space-between; 
  align-items: center; 
  margin: 12px 0; 
  font-size: 17px;
  padding: 8px 4px;
  background: rgba(0,212,255,0.05);
  border-radius: 8px;
}
.pres-label {
  flex: 0 0 auto;
  min-width: 90px;
}
.pres-score { 
  font-weight: bold; 
  color: #00ffff; 
  text-shadow: 0 0 3px #00ffff;
  font-size: 20px;
  min-width: 40px;
  text-align: center;
}
.pres-btns {
  display: flex;
  gap: 4px;
}
.pres-btn { 
  background: #11112a; 
  border: 2px solid #00d4ff; 
  border-radius: 8px; 
  padding: 8px 14px; 
  font-size: 20px;
  margin: 0;
  color: #00d4ff;
  min-width: 44px;
  min-height: 44px;
}
.pres-btn:active { 
  background: #00d4ff; 
  color: #11112a;
}

.pres-total {
  margin: 16px 0;
  font-size: 19px;
  text-align: center;
  font-weight: bold;
}

/* MISS / BREAK */
.count-box { 
  margin: 20px 0; 
  padding: 16px;
  background: rgba(0,212,255,0.05);
  border-radius: 10px;
}
.count-box p {
  font-size: 20px;
  margin: 0 0 12px 0;
  font-weight: bold;
}
.big-btn { 
  background: linear-gradient(to bottom,#00d4ff 0%,#00a0cc 100%); 
  color: #11112a; 
  padding: 16px 24px; 
  border-radius: 12px; 
  font-size: 22px;
  font-weight: bold;
  min-height: 56px;
}
.mini-btn { 
  background: #11112a; 
  border: 2px solid #00d4ff; 
  padding: 12px 20px; 
  border-radius: 10px; 
  font-size: 18px; 
  color: #00d4ff;
}
.mini-btn:active { 
  background: #00d4ff; 
  color: #11112a; 
}

/* Required Elements */
.re-section {
  margin: 16px 0;
  padding: 16px 12px;
  background: rgba(0,212,255,0.05);
  border-radius: 10px;
}
.re-section p {
  font-size: 18px;
  margin: 12px 0;
  font-weight: bold;
}
.re-btns {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
  justify-content: center;
}

/* Result */
.result-score { 
  font-size: 56px; 
  margin: 24px 0; 
  color: #00d4ff; 
  text-shadow: 0 0 10px #00d4ff;
  font-weight: bold;
  text-align: center;
  word-break: break-word;
}

/* Video */
video { 
  width: 100%; 
  max-width: 100%;
  border-radius: 10px; 
  margin: 12px 0;
}
input[type="file"] {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  font-size: 16px;
  border-radius: 8px;
  border: 2px solid #00d4ff;
  background: #11112a;
  color: #00d4ff;
}

/* Navigation */
.nav-buttons {
  display: flex;
  justify-content: space-between;
  margin: 20px 0 12px;
  gap: 8px;
}
.nav-btn { 
  background: #11112a; 
  color: #00d4ff; 
  border: 2px solid #00d4ff; 
  border-radius: 10px; 
  padding: 14px 20px; 
  font-size: 17px;
  flex: 1;
  font-weight: bold;
}
.nav-btn:active {
  background: #00d4ff;
  color: #11112a;
}

/* Tabs */
.tab-buttons {
  display: flex;
  gap: 8px;
  margin: 16px 0;
  justify-content: center;
  flex-wrap: wrap;
}
.tab-btn { 
  padding: 12px 18px; 
  border-radius: 10px; 
  border: 2px solid #00d4ff; 
  background: #11112a; 
  color: #00d4ff; 
  margin: 0;
  cursor: pointer;
  font-size: 16px;
}
.tab-btn.active { 
  background: #00d4ff; 
  color: #11112a;
  font-weight: bold;
}

/* Reset Button */
.reset-btn {
  display: block;
  width: calc(35% - 8px);
  margin: 16px auto;
  background: #8B0000;
  color: white;
  font-weight: bold;
}
</style>
</head>
<body>
<div class="lang-switcher">
<div class="lang-dropdown">
<button class="lang-current" onclick="toggleLangMenu()">üåê <span id="currentLang">Êó•Êú¨Ë™û</span> ‚ñº</button>
<div class="lang-menu" id="langMenu">
<div class="lang-option" onclick="changeLang('ja')">üáØüáµ Êó•Êú¨Ë™û</div>
<div class="lang-option" onclick="changeLang('en')">üá∫üá∏ English</div>
<div class="lang-option" onclick="changeLang('zh')">üá®üá≥ ‰∏≠Êñá</div>
<div class="lang-option" onclick="changeLang('ko')">üá∞üá∑ ÌïúÍµ≠Ïñ¥</div>
<div class="lang-option" onclick="changeLang('ar')">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</div>
</div>
</div>
</div>

<div class="container">

<h2 id="title">üé• ÊºîÊäÄÂãïÁîª</h2>
<input type="file" id="videoUpload" accept="video/*">
<video id="video" controls></video>

<!-- Step 1: Difficulty -->
<div id="s1" class="section active">
<h3 id="h1">‚ë† Difficulty (ÊäÄÁÇπ)</h3>
<div class="level-grid">
<button onclick="addDiff('1')">Lv1</button>
<button onclick="addDiff('0.5')">Lv0.5</button>
<button onclick="addDiff('4')">Lv4</button>
<button onclick="addDiff('2')">Lv2</button>
<button onclick="addDiff('7')">Lv7</button>
<button onclick="addDiff('5')">Lv5</button>
<button onclick="addDiff('3')">Lv3</button>
<button onclick="addDiff('8')">Lv8</button>
<button onclick="addDiff('6')">Lv6</button>
</div>
<div class="value-display"><span id="total1">ÂêàË®à</span>: <span id="diffTotal">0.00</span></div>
<button class="reset-btn" onclick="resetDiff()" id="resetBtn1">„É™„Çª„ÉÉ„Éà</button>
<div class="nav-buttons">
<button class="nav-btn" onclick="next(0)" id="backBtn1">Êàª„Çã</button>
<button class="nav-btn" onclick="next(2)" id="nextBtn1">Ê¨°„Å∏</button>
</div>
</div>

<!-- Step 2: Presentation -->
<div id="s2" class="section">
<h3 id="h2">‚ë° Presentation (Ë°®Áèæ)</h3>
<div class="pres-row">
  <span class="pres-label" id="music">Èü≥Ê•ΩÊÄß</span>
  <span id="disp_music" class="pres-score">0</span>
  <span class="pres-btns">
    <button class="pres-btn" onclick="adjPres('music',1)">‚ûï</button>
    <button class="pres-btn" onclick="adjPres('music',-1)">‚ûñ</button>
  </span>
</div>
<div class="pres-row">
  <span class="pres-label" id="form">„Éï„Ç©„Éº„É†</span>
  <span id="disp_form" class="pres-score">0</span>
  <span class="pres-btns">
    <button class="pres-btn" onclick="adjPres('form',1)">‚ûï</button>
    <button class="pres-btn" onclick="adjPres('form',-1)">‚ûñ</button>
  </span>
</div>
<div class="pres-row">
  <span class="pres-label" id="creative">ÂâµÈÄ†ÊÄß</span>
  <span id="disp_creative" class="pres-score">0</span>
  <span class="pres-btns">
    <button class="pres-btn" onclick="adjPres('creative',1)">‚ûï</button>
    <button class="pres-btn" onclick="adjPres('creative',-1)">‚ûñ</button>
  </span>
</div>
<div class="pres-row">
  <span class="pres-label" id="ent">„Ç®„É≥„Çø„É°</span>
  <span id="disp_ent" class="pres-score">0</span>
  <span class="pres-btns">
    <button class="pres-btn" onclick="adjPres('ent',1)">‚ûï</button>
    <button class="pres-btn" onclick="adjPres('ent',-1)">‚ûñ</button>
  </span>
</div>
<div class="pres-row">
  <span class="pres-label" id="var">Â§öÊßòÊÄß</span>
  <span id="disp_var" class="pres-score">0</span>
  <span class="pres-btns">
    <button class="pres-btn" onclick="adjPres('var',1)">‚ûï</button>
    <button class="pres-btn" onclick="adjPres('var',-1)">‚ûñ</button>
  </span>
</div>
<div class="pres-total"><span id="currentPres">ÁèæÂú®„ÅÆ„Éó„É¨„Çº„É≥ÂæóÁÇπ</span>: <span id="presTotal">0.00</span> / 1.20</div>
<button class="reset-btn" onclick="resetPres()" id="resetBtn2">„É™„Çª„ÉÉ„Éà</button>
<div class="nav-buttons">
<button class="nav-btn" onclick="next(1)" id="backBtn2">Êàª„Çã</button>
<button class="nav-btn" onclick="next(3)" id="nextBtn2">Ê¨°„Å∏</button>
</div>
</div>

<!-- Step 3: Miss / Break -->
<div id="s3" class="section">
<h3 id="h3">‚ë¢ „Éü„Çπ / „Éñ„É¨„Ç§„ÇØ</h3>
<div class="count-box">
<p><span id="missLabel">MISS</span>: <span id="missDisp">0</span></p>
<button class="big-btn" onclick="logMiss()">+1</button>
<button class="mini-btn" onclick="undoMiss()">-1</button>
</div>
<div class="count-box">
<p><span id="breakLabel">BREAK</span>: <span id="breakDisp">0</span></p>
<button class="big-btn" onclick="logBreak()">+1</button>
<button class="mini-btn" onclick="undoBreak()">-1</button>
</div>
<div class="nav-buttons">
<button class="nav-btn" onclick="next(2)" id="backBtn3">Êàª„Çã</button>
<button class="nav-btn" onclick="next(4)" id="nextBtn3">Ê¨°„Å∏</button>
</div>
</div>

<!-- Step 4: Required Elements -->
<div id="s4" class="section">
<h3 id="h4">‚ë£ Required Elements</h3>
<div class="tab-buttons">
<button class="tab-btn active" id="juniorTab" onclick="switchTab('junior')">„Ç∏„É•„Éã„Ç¢ 4„Ç´„Ç¶„É≥„Éà</button>
<button class="tab-btn" id="seniorTab" onclick="switchTab('senior')">„Ç∑„Éã„Ç¢ 6„Ç´„Ç¶„É≥„Éà</button>
</div>

<div id="reJunior">
<div class="re-section">
<p><span id="powerLabel">Power Moves</span> <span id="currentLabel1"></span>: <span id="rePower">0</span>/4</p>
<div class="re-btns">
<button class="pres-btn" onclick="adjRE('power',1)" data-lv3="">Lv3 +1</button>
<button class="pres-btn" onclick="adjRE('power',0.5)" data-lv2="">Lv2‰ª•‰∏ã +0.5</button>
<button class="pres-btn" onclick="adjRE('power',-0.5)" data-cancel="">ÂèñÊ∂à -0.5</button>
</div>
</div>

<div class="re-section">
<p><span id="multiLabel">Multiples</span> <span id="currentLabel2"></span>: <span id="reMulti">0</span>/4</p>
<div class="re-btns">
<button class="pres-btn" onclick="adjRE('multi',1)" data-lv3="">Lv3 +1</button>
<button class="pres-btn" onclick="adjRE('multi',0.5)" data-lv2="">Lv2‰ª•‰∏ã +0.5</button>
<button class="pres-btn" onclick="adjRE('multi',-0.5)" data-cancel="">ÂèñÊ∂à -0.5</button>
</div>
</div>

<div class="re-section">
<p><span id="ropeLabel">Rope Control</span> <span id="currentLabel3"></span>: <span id="reRope">0</span>/4</p>
<div class="re-btns">
<button class="pres-btn" onclick="adjRE('rope',1)" data-lv3="">Lv3 +1</button>
<button class="pres-btn" onclick="adjRE('rope',0.5)" data-lv2="">Lv2‰ª•‰∏ã +0.5</button>
<button class="pres-btn" onclick="adjRE('rope',-0.5)" data-cancel="">ÂèñÊ∂à -0.5</button>
</div>
</div>
</div>

<div id="reSenior" style="display:none">
<div class="re-section">
<p><span id="powerLabelS">Power Moves</span> <span id="currentLabel1S"></span>: <span id="rePowerS">0</span>/6</p>
<div class="re-btns">
<button class="pres-btn" onclick="adjRE('power',1,'senior')" data-lv3="">Lv3 +1</button>
<button class="pres-btn" onclick="adjRE('power',0.5,'senior')" data-lv2="">Lv2‰ª•‰∏ã +0.5</button>
<button class="pres-btn" onclick="adjRE('power',-0.5,'senior')" data-cancel="">ÂèñÊ∂à -0.5</button>
</div>
</div>

<div class="re-section">
<p><span id="multiLabelS">Multiples</span> <span id="currentLabel2S"></span>: <span id="reMultiS">0</span>/6</p>
<div class="re-btns">
<button class="pres-btn" onclick="adjRE('multi',1,'senior')" data-lv3="">Lv3 +1</button>
<button class="pres-btn" onclick="adjRE('multi',0.5,'senior')" data-lv2="">Lv2‰ª•‰∏ã +0.5</button>
<button class="pres-btn" onclick="adjRE('multi',-0.5,'senior')" data-cancel="">ÂèñÊ∂à -0.5</button>
</div>
</div>

<div class="re-section">
<p><span id="ropeLabelS">Rope Control</span> <span id="currentLabel3S"></span>: <span id="reRopeS">0</span>/6</p>
<div class="re-btns">
<button class="pres-btn" onclick="adjRE('rope',1,'senior')" data-lv3="">Lv3 +1</button>
<button class="pres-btn" onclick="adjRE('rope',0.5,'senior')" data-lv2="">Lv2‰ª•‰∏ã +0.5</button>
<button class="pres-btn" onclick="adjRE('rope',-0.5,'senior')" data-cancel="">ÂèñÊ∂à -0.5</button>
</div>
</div>
</div>

<button class="reset-btn" onclick="resetRE()" id="resetBtn4">„É™„Çª„ÉÉ„Éà</button>
<div class="nav-buttons">
<button class="nav-btn" onclick="next(3)" id="backBtn4">Êàª„Çã</button>
<button class="nav-btn" onclick="next(5)" id="nextBtn4">Ê¨°„Å∏</button>
</div>
</div>

<!-- Step 5: Final Score -->
<div id="s5" class="section">
<h3 id="h5">üèÅ Final Score</h3>
<div class="result-score" id="result">0.00</div>
<button class="nav-btn" style="width:calc(100% - 8px);" onclick="location.reload()" id="newScoreBtn">Êñ∞„Åó„ÅèÊé°ÁÇπ„Åô„Çã</button>
</div>

</div>

<script>
const v=document.getElementById("video");
videoUpload.onchange=e=>v.src=URL.createObjectURL(e.target.files[0]);

function toggleLangMenu(){
  document.getElementById('langMenu').classList.toggle('show');
}
document.addEventListener('click', function(e){
  if(!e.target.closest('.lang-dropdown')){
    document.getElementById('langMenu').classList.remove('show');
  }
});

const translations = {
  ja: {
    name: 'Êó•Êú¨Ë™û',
    title: 'üé• ÊºîÊäÄÂãïÁîª',
    h1: '‚ë† Difficulty (ÊäÄÁÇπ)',
    h2: '‚ë° Presentation (Ë°®Áèæ)',
    h3: '‚ë¢ „Éü„Çπ / „Éñ„É¨„Ç§„ÇØ',
    h4: '‚ë£ Required Elements',
    h5: 'üèÅ Final Score',
    total1: 'ÂêàË®à',
    music: 'Èü≥Ê•ΩÊÄß',
    form: '„Éï„Ç©„Éº„É†',
    creative: 'ÂâµÈÄ†ÊÄß',
    ent: '„Ç®„É≥„Çø„É°',
    var: 'Â§öÊßòÊÄß',
    currentPres: 'ÁèæÂú®„ÅÆ„Éó„É¨„Çº„É≥ÂæóÁÇπ',
    missLabel: 'MISS',
    breakLabel: 'BREAK',
    powerLabel: 'Power Moves',
    multiLabel: 'Multiples',
    ropeLabel: 'Rope Control',
    juniorTab: '„Ç∏„É•„Éã„Ç¢ 4„Ç´„Ç¶„É≥„Éà',
    seniorTab: '„Ç∑„Éã„Ç¢ 6„Ç´„Ç¶„É≥„Éà',
    lv3: 'Lv3 +1',
    lv2: 'Lv2‰ª•‰∏ã +0.5',
    cancel: 'ÂèñÊ∂à -0.5',
    resetBtn: '„É™„Çª„ÉÉ„Éà',
    backBtn: 'Êàª„Çã',
    nextBtn: 'Ê¨°„Å∏',
    newScoreBtn: 'Êñ∞„Åó„ÅèÊé°ÁÇπ„Åô„Çã'
  },
  en: {
    name: 'English',
    title: 'üé• Performance Video',
    h1: '‚ë† Difficulty',
    h2: '‚ë° Presentation',
    h3: '‚ë¢ Miss / Break',
    h4: '‚ë£ Required Elements',
    h5: 'üèÅ Final Score',
    total1: 'Total',
    music: 'Musicality',
    form: 'Form',
    creative: 'Creativity',
    ent: 'Entertainment',
    var: 'Variety',
    currentPres: 'Current Presentation Score',
    missLabel: 'MISS',
    breakLabel: 'BREAK',
    powerLabel: 'Power Moves',
    multiLabel: 'Multiples',
    ropeLabel: 'Rope Control',
    juniorTab: 'Junior 4 Counts',
    seniorTab: 'Senior 6 Counts',
    lv3: 'Lv3 +1',
    lv2: 'Lv2‚â§ +0.5',
    cancel: 'Cancel -0.5',
    resetBtn: 'Reset',
    backBtn: 'Back',
    nextBtn: 'Next',
    newScoreBtn: 'New Scoring'
  },
  zh: {
    name: '‰∏≠Êñá',
    title: 'üé• Ë°®ÊºîËßÜÈ¢ë',
    h1: '‚ë† ÈöæÂ∫¶',
    h2: '‚ë° Ë°®Áé∞',
    h3: '‚ë¢ Â§±ËØØ / ‰∏≠Êñ≠',
    h4: '‚ë£ ÂøÖÈúÄÂÖÉÁ¥†',
    h5: 'üèÅ ÊúÄÁªàÂæóÂàÜ',
    total1: 'ÊÄªËÆ°',
    music: 'Èü≥‰πêÊÄß',
    form: 'ÂΩ¢ÊÄÅ',
    creative: 'ÂàõÈÄ†ÊÄß',
    ent: 'Â®±‰πêÊÄß',
    var: 'Â§öÊ†∑ÊÄß',
    currentPres: 'ÂΩìÂâçË°®Áé∞ÂæóÂàÜ',
    missLabel: 'Â§±ËØØ',
    breakLabel: '‰∏≠Êñ≠',
    powerLabel: 'Power Moves',
    multiLabel: 'Multiples',
    ropeLabel: 'Rope Control',
    juniorTab: 'Â∞ëÂπ¥ÁªÑ 4Ê¨°',
    seniorTab: 'È´òÁ∫ßÁªÑ 6Ê¨°',
    lv3: 'Lv3 +1',
    lv2: 'Lv2‚â§ +0.5',
    cancel: 'ÂèñÊ∂à -0.5',
    resetBtn: 'ÈáçÁΩÆ',
    backBtn: 'ËøîÂõû',
    nextBtn: '‰∏ã‰∏ÄÊ≠•',
    newScoreBtn: 'Êñ∞ËØÑÂàÜ'
  },
  ko: {
    name: 'ÌïúÍµ≠Ïñ¥',
    title: 'üé• Í≥µÏó∞ ÏòÅÏÉÅ',
    h1: '‚ë† ÎÇúÏù¥ÎèÑ',
    h2: '‚ë° ÌëúÌòÑ',
    h3: '‚ë¢ ÎØ∏Ïä§ / Î∏åÎ†àÏù¥ÌÅ¨',
    h4: '‚ë£ ÌïÑÏàò ÏöîÏÜå',
    h5: 'üèÅ ÏµúÏ¢Ö Ï†êÏàò',
    total1: 'Ìï©Í≥Ñ',
    music: 'ÏùåÏïÖÏÑ±',
    form: 'Ìèº',
    creative: 'Ï∞ΩÏùòÏÑ±',
    ent: 'ÏóîÌÑ∞ÌÖåÏù∏Î®ºÌä∏',
    var: 'Îã§ÏñëÏÑ±',
    currentPres: 'ÌòÑÏû¨ ÌëúÌòÑ Ï†êÏàò',
    missLabel: 'ÎØ∏Ïä§',
    breakLabel: 'Î∏åÎ†àÏù¥ÌÅ¨',
    powerLabel: 'Power Moves',
    multiLabel: 'Multiples',
    ropeLabel: 'Rope Control',
    juniorTab: 'Ï£ºÎãàÏñ¥ 4Ïπ¥Ïö¥Ìä∏',
    seniorTab: 'ÏãúÎãàÏñ¥ 6Ïπ¥Ïö¥Ìä∏',
    lv3: 'Lv3 +1',
    lv2: 'Lv2‚â§ +0.5',
    cancel: 'Ï∑®ÏÜå -0.5',
    resetBtn: 'Î¶¨ÏÖã',
    backBtn: 'Îí§Î°ú',
    nextBtn: 'Îã§Ïùå',
    newScoreBtn: 'ÏÉàÎ°ú Ï±ÑÏ†êÌïòÍ∏∞'
  },
  ar: {
    name: 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',
    title: 'üé• ŸÅŸäÿØŸäŸà ÿßŸÑÿ£ÿØÿßÿ°',
    h1: '‚ë† ÿßŸÑÿµÿπŸàÿ®ÿ©',
    h2: '‚ë° ÿßŸÑÿπÿ±ÿ∂',
    h3: '‚ë¢ ÿÆÿ∑ÿ£ / ÿ™ŸàŸÇŸÅ',
    h4: '‚ë£ ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©',
    h5: 'üèÅ ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©',
    total1: 'ÿßŸÑŸÖÿ¨ŸÖŸàÿπ',
    music: 'ÿßŸÑŸÖŸàÿ≥ŸäŸÇŸâ',
    form: 'ÿßŸÑÿ¥ŸÉŸÑ',
    creative: 'ÿßŸÑÿ•ÿ®ÿØÿßÿπ',
    ent: 'ÿßŸÑÿ™ÿ±ŸÅŸäŸá',
    var: 'ÿßŸÑÿ™ŸÜŸàÿπ',
    currentPres: 'ŸÜŸÇÿßÿ∑ ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ≠ÿßŸÑŸäÿ©',
    missLabel: 'ÿÆÿ∑ÿ£',
    breakLabel: 'ÿ™ŸàŸÇŸÅ',
    powerLabel: 'Power Moves',
    multiLabel: 'Multiples',
    ropeLabel: 'Rope Control',
    juniorTab: 'ÿßŸÑŸÖÿ®ÿ™',
    seniorTab: 'ÿßŸÑŸÖÿ™ŸÇÿØŸÖŸäŸÜ 6 ÿπÿØ',
    lv3: 'Lv3 +1',
    lv2: 'Lv2 ÿ£Ÿà ÿ£ŸÇŸÑ +0.5',
    cancel: 'ÿ•ŸÑÿ∫ÿßÿ° -0.5',
    resetBtn: 'ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ',
    backBtn: 'ÿ±ÿ¨Ÿàÿπ',
    nextBtn: 'ÿßŸÑÿ™ÿßŸÑŸä',
    newScoreBtn: 'ÿ™ÿ≥ÿ¨ŸäŸÑ ÿ¨ÿØŸäÿØ'
  }
};

function changeLang(lang) {
  const t = translations[lang];
  document.getElementById('currentLang').textContent = t.name;
  document.getElementById('title').textContent = t.title;
  document.getElementById('h1').textContent = t.h1;
  document.getElementById('h2').textContent = t.h2;
  document.getElementById('h3').textContent = t.h3;
  document.getElementById('h4').textContent = t.h4;
  document.getElementById('h5').textContent = t.h5;
  document.getElementById('total1').textContent = t.total1;
  document.getElementById('music').textContent = t.music;
  document.getElementById('form').textContent = t.form;
  document.getElementById('creative').textContent = t.creative;
  document.getElementById('ent').textContent = t.ent;
  document.getElementById('var').textContent = t.var;
  document.getElementById('currentPres').textContent = t.currentPres;
  document.getElementById('missLabel').textContent = t.missLabel;
  document.getElementById('breakLabel').textContent = t.breakLabel;
  document.getElementById('powerLabel').textContent = t.powerLabel;
  document.getElementById('multiLabel').textContent = t.multiLabel;
  document.getElementById('ropeLabel').textContent = t.ropeLabel;
  document.getElementById('currentLabel1').textContent = t.currentLabel;
  document.getElementById('currentLabel2').textContent = t.currentLabel;
  document.getElementById('currentLabel3').textContent = t.currentLabel;
  document.getElementById('powerLabelS').textContent = t.powerLabel;
  document.getElementById('multiLabelS').textContent = t.multiLabel;
  document.getElementById('ropeLabelS').textContent = t.ropeLabel;
  document.getElementById('currentLabel1S').textContent = t.currentLabel;
  document.getElementById('currentLabel2S').textContent = t.currentLabel;
  document.getElementById('currentLabel2S').textContent = t.currentLabel;
  document.getElementById('juniorTab').textContent = t.juniorTab;
  document.getElementById('seniorTab').textContent = t.seniorTab;
  document.getElementById('resetBtn1').textContent = t.resetBtn;
  document.getElementById('resetBtn2').textContent = t.resetBtn;
  document.getElementById('resetBtn4').textContent = t.resetBtn;
  document.getElementById('backBtn1').textContent = t.backBtn;
  document.getElementById('backBtn2').textContent = t.backBtn;
  document.getElementById('backBtn3').textContent = t.backBtn;
  document.getElementById('backBtn4').textContent = t.backBtn;
  document.getElementById('nextBtn1').textContent = t.nextBtn;
  document.getElementById('nextBtn2').textContent = t.nextBtn;
  document.getElementById('nextBtn3').textContent = t.nextBtn;
  document.getElementById('nextBtn4').textContent = t.nextBtn;
  document.getElementById('newScoreBtn').textContent = t.newScoreBtn;
  
  document.querySelectorAll('[data-lv3]').forEach(btn => btn.textContent = t.lv3);
  document.querySelectorAll('[data-lv2]').forEach(btn => btn.textContent = t.lv2);
  document.querySelectorAll('[data-cancel]').forEach(btn => btn.textContent = t.cancel);
  
  document.getElementById('langMenu').classList.remove('show');
}

// navigation
function next(n){
  if(n===0){return;} 
  document.querySelectorAll('.section').forEach(s=>s.classList.remove("active"));
  document.getElementById("s"+n).classList.add("active");
}

// Difficulty
let diff=0;
const diffTable={"0.5":0.12,"1":0.15,"2":0.23,"3":0.34,"4":0.51,"5":0.76,"6":1.14,"7":1.71,"8":2.56};
function addDiff(l){ diff+=diffTable[l]; diffTotal.textContent=diff.toFixed(2); updateFinal();}
function resetDiff(){ diff=0; diffTotal.textContent="0.00"; updateFinal(); }

// Presentation
let pres={music:0,form:0,creative:0,ent:0,var:0};
const presWeight={music:0.2,form:0.25,creative:0.15,ent:0.25,var:0.15};
function updatePresTotal(){
  let total=0;
  for(let k in pres){
    total += pres[k]*presWeight[k]/24;
  }
  total = Math.min(total*1.2,1.2);
  presTotal.textContent = total.toFixed(2);
  updateFinal();
}
function adjPres(k,v){
  pres[k]=Math.max(0,Math.min(24,pres[k]+v));
  document.getElementById("disp_"+k).textContent = pres[k];
  updatePresTotal();
}
function resetPres(){
  for(let k in pres) pres[k]=0;
  for(let k in pres) document.getElementById("disp_"+k).textContent=0;
  updatePresTotal();
}

// Miss / Break
let missCount=0, breakCount=0;
function logMiss(){ missCount++; missDisp.textContent=missCount; updateFinal(); }
function undoMiss(){ missCount=Math.max(0,missCount-1); missDisp.textContent=missCount; updateFinal(); }
function logBreak(){ breakCount++; breakDisp.textContent=breakCount; updateFinal(); }
function undoBreak(){ breakCount=Math.max(0,breakCount-1); breakDisp.textContent=breakCount; updateFinal(); }

// Required Elements
let reScore={power:0,multi:0,rope:0};
let isJunior=true;
function switchTab(t){
  if(t==='junior'){ 
    isJunior=true;
    reJunior.style.display='block';
    reSenior.style.display='none';
    juniorTab.classList.add('active');
    seniorTab.classList.remove('active');
  } else {
    isJunior=false;
    reJunior.style.display='none';
    reSenior.style.display='block';
    juniorTab.classList.remove('active');
    seniorTab.classList.add('active');
  }
  resetRE();
}
function adjRE(k,v,group){
  let target=isJunior?'Junior':'Senior';
  if(group==='senior'){ isJunior=false;} 
  let maxCount = isJunior?4:6;
  reScore[k]=Math.max(0, Math.min(maxCount, reScore[k]+v));
  if(k==='power') document.getElementById(isJunior?'rePower':'rePowerS').textContent=reScore[k];
  if(k==='multi') document.getElementById(isJunior?'reMulti':'reMultiS').textContent=reScore[k];
  if(k==='rope') document.getElementById(isJunior?'reRope':'reRopeS').textContent=reScore[k];
  updateFinal();
}
function resetRE(){
  reScore={power:0,multi:0,rope:0};
  document.getElementById('rePower').textContent=0;
  document.getElementById('reMulti').textContent=0;
  document.getElementById('reRope').textContent=0;
  document.getElementById('rePowerS').textContent=0;
  document.getElementById('reMultiS').textContent=0;
  document.getElementById('reRopeS').textContent=0;
  updateFinal();
}

// Final Score Ëá™ÂãïË®àÁÆó
function updateFinal(){
  let D = diff/3;
  let P=0;
  for(let k in pres) P+= pres[k]*presWeight[k]/24;
  P=Math.min(P*1.2,1.2);
  let maxRE = isJunior?4:6;
  let RE = (reScore.power + reScore.multi + reScore.rope)/(3*maxRE);
  let Q = RE;
  let M = missCount===0?0:missCount===1?0.05:missCount===2?0.125:missCount===3?0.225:0.225+(missCount-3)*0.10;
  let B = breakCount*0.05;
  let final = D*(1+P)*Q*(1-(M+B));
  result.textContent = Math.max(0,final).toFixed(2);
}
</script>
</body>
</html>